<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GuideAI Improvements Test</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/assets/css/guideai.min.css">
    <link rel="stylesheet" href="/assets/css/ai-response.css">
    <style>
        .test-container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 2rem;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .test-section {
            margin-bottom: 2rem;
            padding: 1rem;
            border: 1px solid #e9ecef;
            border-radius: 8px;
        }
        .test-button {
            margin: 0.5rem;
        }
    </style>
</head>
<body class="bg-light">
    <div class="test-container">
        <h1 class="text-center mb-4">GuideAI Improvements Test</h1>
        
        <!-- AI Response Formatting Test -->
        <div class="test-section">
            <h3>üé® AI Response Formatting Test</h3>
            <p>Test the enhanced AI response formatting with different content types:</p>
            
            <div class="mb-3">
                <button class="btn btn-primary test-button" onclick="testMarkdownFormatting()">
                    Test Markdown Formatting
                </button>
                <button class="btn btn-success test-button" onclick="testSpecialTerms()">
                    Test Special Terms
                </button>
                <button class="btn btn-info test-button" onclick="testPhoneNumbers()">
                    Test Phone Numbers
                </button>
                <button class="btn btn-warning test-button" onclick="testLists()">
                    Test Lists
                </button>
            </div>
            
            <div id="formattingTestResults" class="mt-3"></div>
        </div>
        
        <!-- Local Storage Test -->
        <div class="test-section">
            <h3>üíæ Local Storage Test</h3>
            <p>Test the chat history local storage functionality:</p>
            
            <div class="mb-3">
                <button class="btn btn-primary test-button" onclick="testSaveChat()">
                    Save Test Chat
                </button>
                <button class="btn btn-success test-button" onclick="testLoadChat()">
                    Load Chat History
                </button>
                <button class="btn btn-info test-button" onclick="testExportChat()">
                    Export Chat History
                </button>
                <button class="btn btn-warning test-button" onclick="testClearChat()">
                    Clear Chat History
                </button>
            </div>
            
            <div id="storageTestResults" class="mt-3"></div>
        </div>
        
        <!-- Sample AI Response Display -->
        <div class="test-section">
            <h3>üìù Sample AI Response Display</h3>
            <div id="sampleResponse" class="chat-message bot">
                <div class="bot-message">
                    <div class="message-content">
                        <div class="message-header">
                            <small class="assistant-label">GuideAI Assistant</small>
                        </div>
                        <div class="message-body">
                            <h4 class="response-header">Understanding IEPs</h4>
                            <p class="response-paragraph">
                                An <span class="special-term">IEP</span> (Individualized Education Program) is a legal document that outlines the special education services your child will receive. Under <span class="special-term">IDEA</span>, every child with a disability is entitled to a <span class="special-term">FAPE</span> (Free Appropriate Public Education).
                            </p>
                            <h5 class="response-subheader">Key Components:</h5>
                            <ul class="response-list">
                                <li class="response-list-item">Present levels of academic achievement</li>
                                <li class="response-list-item">Measurable annual goals</li>
                                <li class="response-list-item">Special education services</li>
                                <li class="response-list-item">Accommodations and modifications</li>
                            </ul>
                            <p class="response-paragraph">
                                For more information, contact your local school district or call <span class="phone-number">üìû 555-123-4567</span>.
                            </p>
                        </div>
                    </div>
                    <div class="message-time">Just now</div>
                </div>
            </div>
        </div>
    </div>

    <script src="/assets/js/guideai.min.js"></script>
    <script>
        // Test AI Response Formatting
        function testMarkdownFormatting() {
            const testContent = `## Understanding IEPs

This is a **bold** section with *italic* text and \`code\` examples.

### Key Points:
- First important point
- Second important point
- Third important point

The IEP process involves multiple steps and requires careful planning.`;

            const formatted = window.guideAI ? window.guideAI.formatBotResponse(testContent) : 'GuideAI not loaded';
            document.getElementById('formattingTestResults').innerHTML = `
                <div class="alert alert-success">
                    <h5>Markdown Formatting Test:</h5>
                    <div class="border p-3 bg-light">${formatted}</div>
                </div>
            `;
        }

        function testSpecialTerms() {
            const testContent = `The IEP process is governed by IDEA, which ensures FAPE for all students. A 504 Plan may also be appropriate in some cases.`;
            const formatted = window.guideAI ? window.guideAI.formatBotResponse(testContent) : 'GuideAI not loaded';
            document.getElementById('formattingTestResults').innerHTML = `
                <div class="alert alert-success">
                    <h5>Special Terms Test:</h5>
                    <div class="border p-3 bg-light">${formatted}</div>
                </div>
            `;
        }

        function testPhoneNumbers() {
            const testContent = `Contact us at 555-123-4567 or (555) 987-6543 for more information.`;
            const formatted = window.guideAI ? window.guideAI.formatBotResponse(testContent) : 'GuideAI not loaded';
            document.getElementById('formattingTestResults').innerHTML = `
                <div class="alert alert-success">
                    <h5>Phone Numbers Test:</h5>
                    <div class="border p-3 bg-light">${formatted}</div>
                </div>
            `;
        }

        function testLists() {
            const testContent = `Here are the steps:
- First step
- Second step
- Third step

And another list:
‚Ä¢ Item one
‚Ä¢ Item two
‚Ä¢ Item three`;
            const formatted = window.guideAI ? window.guideAI.formatBotResponse(testContent) : 'GuideAI not loaded';
            document.getElementById('formattingTestResults').innerHTML = `
                <div class="alert alert-success">
                    <h5>Lists Test:</h5>
                    <div class="border p-3 bg-light">${formatted}</div>
                </div>
            `;
        }

        // Test Local Storage
        function testSaveChat() {
            if (!window.guideAI) {
                document.getElementById('storageTestResults').innerHTML = `
                    <div class="alert alert-danger">GuideAI not loaded</div>
                `;
                return;
            }

            // Add test messages
            window.guideAI.addToChatHistory({
                role: 'user',
                content: 'Test user message'
            });
            window.guideAI.addToChatHistory({
                role: 'assistant',
                content: 'Test AI response'
            });

            document.getElementById('storageTestResults').innerHTML = `
                <div class="alert alert-success">
                    ‚úÖ Test chat saved to local storage
                </div>
            `;
        }

        function testLoadChat() {
            if (!window.guideAI) {
                document.getElementById('storageTestResults').innerHTML = `
                    <div class="alert alert-danger">GuideAI not loaded</div>
                `;
                return;
            }

            const history = window.guideAI.getStoredChatHistory();
            document.getElementById('storageTestResults').innerHTML = `
                <div class="alert alert-info">
                    <h5>Chat History Loaded:</h5>
                    <pre>${JSON.stringify(history, null, 2)}</pre>
                </div>
            `;
        }

        function testExportChat() {
            if (!window.guideAI) {
                document.getElementById('storageTestResults').innerHTML = `
                    <div class="alert alert-danger">GuideAI not loaded</div>
                `;
                return;
            }

            const success = window.guideAI.exportChatHistory();
            document.getElementById('storageTestResults').innerHTML = `
                <div class="alert alert-${success ? 'success' : 'danger'}">
                    ${success ? '‚úÖ Chat history exported successfully' : '‚ùå Export failed'}
                </div>
            `;
        }

        function testClearChat() {
            if (!window.guideAI) {
                document.getElementById('storageTestResults').innerHTML = `
                    <div class="alert alert-danger">GuideAI not loaded</div>
                `;
                return;
            }

            if (confirm('Are you sure you want to clear the chat history?')) {
                window.guideAI.clearStoredChatHistory();
                document.getElementById('storageTestResults').innerHTML = `
                    <div class="alert alert-warning">
                        ‚úÖ Chat history cleared from local storage
                    </div>
                `;
            }
        }

        // Initialize GuideAI when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Create a minimal GuideAI instance for testing
            if (typeof GuideAI !== 'undefined') {
                window.guideAI = new GuideAI();
                console.log('‚úÖ GuideAI initialized for testing');
            } else {
                console.error('‚ùå GuideAI class not found');
            }
        });
    </script>
</body>
</html> 