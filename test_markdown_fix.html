<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdown Formatting Test - GuideAI</title>
    <link rel="stylesheet" href="assets/css/guideai.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f8f9fa;
        }
        .test-container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .test-title {
            color: #2c3e50;
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 20px;
            border-bottom: 2px solid #6f42c1;
            padding-bottom: 10px;
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #e1e8ed;
            border-radius: 8px;
            background: #f8f9fa;
        }
        .test-label {
            font-weight: 600;
            color: #495057;
            margin-bottom: 10px;
            display: block;
        }
        .raw-content {
            background: #f1f3f4;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            white-space: pre-wrap;
            margin-bottom: 15px;
            border-left: 4px solid #dc3545;
        }
        .formatted-content {
            background: white;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #e1e8ed;
            margin-bottom: 15px;
        }
        .status {
            padding: 10px;
            border-radius: 6px;
            font-weight: 600;
            text-align: center;
        }
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .test-button {
            background: #6f42c1;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            margin: 5px;
        }
        .test-button:hover {
            background: #5a32a3;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1 class="test-title">üîß Markdown Formatting Test</h1>
        <p>This test verifies that the <code>formatBotResponse()</code> function correctly processes Markdown syntax in AI responses.</p>
        
        <div class="test-section">
            <span class="test-label">Test 1: Mixed HTML and Markdown Content</span>
            <div class="raw-content">Here's some text with <strong>HTML</strong>.

### This should be a header
- This should be a list item
- Another list item

**This should be bold** and *this should be italic*.

## Another header
Some more text here.</div>
            
            <div class="formatted-content" id="test1-result">
                <em>Click "Test Formatting" to see the result</em>
            </div>
            
            <button class="test-button" onclick="testFormatting(1)">Test Formatting</button>
            <div id="test1-status"></div>
        </div>

        <div class="test-section">
            <span class="test-label">Test 2: Pure Markdown Content</span>
            <div class="raw-content">### IEP Meeting Preparation

Here's what you need to know:

**Important Terms:**
- IEP (Individualized Education Program)
- IDEA (Individuals with Disabilities Education Act)
- FAPE (Free Appropriate Public Education)

*Contact your school district at 503-947-5600 for more information.*

## Next Steps
1. Review your child's current IEP
2. Prepare questions
3. Bring documentation</div>
            
            <div class="formatted-content" id="test2-result">
                <em>Click "Test Formatting" to see the result</em>
            </div>
            
            <button class="test-button" onclick="testFormatting(2)">Test Formatting</button>
            <div id="test2-status"></div>
        </div>

        <div class="test-section">
            <span class="test-label">Test 3: Code Blocks and Special Characters</span>
            <div class="raw-content">```markdown
### This was in a code block
- Should be processed normally
```

**Regular content** with `inline code` and special terms like IEP and IDEA.

Contact: (503) 947-5600</div>
            
            <div class="formatted-content" id="test3-result">
                <em>Click "Test Formatting" to see the result</em>
            </div>
            
            <button class="test-button" onclick="testFormatting(3)">Test Formatting</button>
            <div id="test3-status"></div>
        </div>

        <div class="test-section">
            <span class="test-label">Test 4: Already Formatted HTML</span>
            <div class="raw-content"><h3>This is already HTML</h3>
<p>This paragraph is already formatted.</p>
<ul>
<li>This list is already HTML</li>
<li>Another item</li>
</ul>

But this should still be processed: **bold text** and ### new header</div>
            
            <div class="formatted-content" id="test4-result">
                <em>Click "Test Formatting" to see the result</em>
            </div>
            
            <button class="test-button" onclick="testFormatting(4)">Test Formatting</button>
            <div id="test4-status"></div>
        </div>
    </div>

    <script src="assets/js/guideai.js"></script>
    <script>
        // Test content
        const testContent = {
            1: `Here's some text with <strong>HTML</strong>.

### This should be a header
- This should be a list item
- Another list item

**This should be bold** and *this should be italic*.

## Another header
Some more text here.`,

            2: `### IEP Meeting Preparation

Here's what you need to know:

**Important Terms:**
- IEP (Individualized Education Program)
- IDEA (Individuals with Disabilities Education Act)
- FAPE (Free Appropriate Public Education)

*Contact your school district at 503-947-5600 for more information.*

## Next Steps
1. Review your child's current IEP
2. Prepare questions
3. Bring documentation`,

            3: `\`\`\`markdown
### This was in a code block
- Should be processed normally
\`\`\`

**Regular content** with \`inline code\` and special terms like IEP and IDEA.

Contact: (503) 947-5600`,

            4: `<h3>This is already HTML</h3>
<p>This paragraph is already formatted.</p>
<ul>
<li>This list is already HTML</li>
<li>Another item</li>
</ul>

But this should still be processed: **bold text** and ### new header`
        };

        function testFormatting(testNumber) {
            const content = testContent[testNumber];
            const resultDiv = document.getElementById(`test${testNumber}-result`);
            const statusDiv = document.getElementById(`test${testNumber}-status`);
            
            try {
                // Create a temporary GuideAI instance to test the function
                const tempGuideAI = new GuideAI();
                const formatted = tempGuideAI.formatBotResponse(content);
                
                resultDiv.innerHTML = formatted;
                
                // Check if formatting worked
                const hasHeaders = formatted.includes('response-header') || formatted.includes('response-subheader');
                const hasBold = formatted.includes('response-bold');
                const hasLists = formatted.includes('response-list-item');
                const hasSpecialTerms = formatted.includes('special-term');
                const hasPhoneNumbers = formatted.includes('phone-number');
                
                let status = 'success';
                let message = '‚úÖ Formatting successful!';
                
                if (!hasHeaders && content.includes('###')) {
                    status = 'error';
                    message = '‚ùå Headers not formatted correctly';
                } else if (!hasBold && content.includes('**')) {
                    status = 'error';
                    message = '‚ùå Bold text not formatted correctly';
                } else if (!hasLists && content.includes('- ')) {
                    status = 'error';
                    message = '‚ùå Lists not formatted correctly';
                }
                
                statusDiv.innerHTML = `<div class="status ${status}">${message}</div>`;
                
                console.log(`Test ${testNumber} result:`, formatted);
                
            } catch (error) {
                resultDiv.innerHTML = `<div class="status error">‚ùå Error: ${error.message}</div>`;
                statusDiv.innerHTML = `<div class="status error">‚ùå Test failed</div>`;
                console.error(`Test ${testNumber} error:`, error);
            }
        }

        // Auto-run all tests on page load
        window.addEventListener('load', () => {
            setTimeout(() => {
                console.log('üß™ Running all Markdown formatting tests...');
                for (let i = 1; i <= 4; i++) {
                    setTimeout(() => testFormatting(i), i * 500);
                }
            }, 1000);
        });
    </script>
</body>
</html> 