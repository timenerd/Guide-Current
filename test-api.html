<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Test</title>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
    <div class="container mt-5">
        <h1>GuideAI API Test</h1>
        
        <div class="row">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5>Test API Endpoints</h5>
                    </div>
                    <div class="card-body">
                        <button id="testClaude" class="btn btn-primary mb-2">Test Claude API</button>
                        <button id="testGemini" class="btn btn-success mb-2">Test Gemini API</button>
                        <button id="testOpenAI" class="btn btn-info mb-2">Test OpenAI API</button>
                        <div id="testResults" class="mt-3"></div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5>Test JavaScript</h5>
                    </div>
                    <div class="card-body">
                        <button id="testJS" class="btn btn-warning mb-2">Test JavaScript Initialization</button>
                        <div id="jsResults" class="mt-3"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Test API endpoints
        async function testAPI(endpoint, name) {
            const resultsDiv = document.getElementById('testResults');
            const resultDiv = document.createElement('div');
            resultDiv.className = 'alert alert-info';
            resultDiv.textContent = `Testing ${name}...`;
            resultsDiv.appendChild(resultDiv);
            
            try {
                const response = await fetch(endpoint, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ action: 'test' })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    resultDiv.className = 'alert alert-success';
                    resultDiv.textContent = `✅ ${name}: Working`;
                } else {
                    resultDiv.className = 'alert alert-warning';
                    resultDiv.textContent = `⚠️ ${name}: ${data.error || 'Unknown error'}`;
                }
            } catch (error) {
                resultDiv.className = 'alert alert-danger';
                resultDiv.textContent = `❌ ${name}: ${error.message}`;
            }
        }
        
        // Test JavaScript initialization
        function testJavaScript() {
            const resultsDiv = document.getElementById('jsResults');
            resultsDiv.innerHTML = '';
            
            // Test if GuideAI class exists
            if (typeof GuideAI !== 'undefined') {
                const resultDiv = document.createElement('div');
                resultDiv.className = 'alert alert-success';
                resultDiv.textContent = '✅ GuideAI class found';
                resultsDiv.appendChild(resultDiv);
                
                // Test if we can create an instance
                try {
                    const guideAI = new GuideAI();
                    const resultDiv2 = document.createElement('div');
                    resultDiv2.className = 'alert alert-success';
                    resultDiv2.textContent = '✅ GuideAI instance created successfully';
                    resultsDiv.appendChild(resultDiv2);
                } catch (error) {
                    const resultDiv2 = document.createElement('div');
                    resultDiv2.className = 'alert alert-danger';
                    resultDiv2.textContent = `❌ Failed to create GuideAI instance: ${error.message}`;
                    resultsDiv.appendChild(resultDiv2);
                }
            } else {
                const resultDiv = document.createElement('div');
                resultDiv.className = 'alert alert-danger';
                resultDiv.textContent = '❌ GuideAI class not found';
                resultsDiv.appendChild(resultDiv);
            }
        }
        
        // Event listeners
        document.getElementById('testClaude').addEventListener('click', () => {
            testAPI('/api/claude.php', 'Claude API');
        });
        
        document.getElementById('testGemini').addEventListener('click', () => {
            testAPI('/api/gemini.php', 'Gemini API');
        });
        
        document.getElementById('testOpenAI').addEventListener('click', () => {
            testAPI('/api.php', 'OpenAI API');
        });
        
        document.getElementById('testJS').addEventListener('click', () => {
            testJavaScript();
        });
    </script>
    
    <!-- Load GuideAI script -->
    <script src="guideai.min.js"></script>
</body>
</html> 